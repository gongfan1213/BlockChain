# COMP4137/COMP7200编程项目：迷你区块链的实现
COMP4137/COMP7200

戴宏宁（Henry Hong-Ning Dai）

2025年3月12日
## 重要时间节点
- **小组注册截止时间**：2025年3月20日17:00
- **项目第一阶段截止时间**：2025年4月3日17:00
- **项目第二阶段截止时间**：2025年4月24日17:00
## 1. 引言
在本项目中，你需要完成一个编程项目，实现一个迷你区块链系统。你将与团队成员共同完成该项目，项目包含以下组件：（1）交易生成；（2）可验证的交易默克尔树；（3）区块链构建；（4）交易和区块的完整性验证 。建议使用Python、Java或JavaScript作为编程语言来实现项目。若想使用其他语言，请告知我们。

项目完成后，你需要提交一份英文撰写的综合技术报告。此外，还需制作一个不超过5分钟的短视频展示项目成果。
## 2. 目标
完成本项目后，你应深入理解区块链系统的工作原理，并能够从零搭建一个区块链平台。同时，积累问题解决和高级编程技术方面的经验。
## 3. 要求
项目需以小组形式完成，每组3 - 5名学生。请在最终项目报告中明确每个成员的工作分工。小组组建截止时间为2025年3月20日17:00。对于未能自行组队的学生，截止日期后助教将手动分配小组。

请用自己的语言撰写文档，并确保正确引用所使用的材料（包括代码）。请注意香港浸会大学的剽窃手册：http://ar.hkbu.edu.hk/curr/avoid plagiarism/ 。
## 4. 任务
一个完整的区块链需要多种技术，涵盖加密算法、数据结构、数字签名、数字哈希、对等网络系统和激励机制。鉴于时间有限，你只需实现以下基本组件：（1）交易生成；（2）可验证的交易默克尔树；（3）区块链构建；（4）交易和区块链的完整性验证。
### 4.1 交易生成
在生成交易前，需要为用户创建区块链账户。用户将拥有一对私钥和公钥，其中公钥将作为用户在区块链中的交易账户。可考虑采用知名的公钥加密算法，如椭圆曲线密码学（ECC）、RSA、EI-Gamal等。为此，可参考Python加密库 或Java加密库 。

**单输入单输出交易**：你的区块链仅生成单输入单输出（SISO）交易。以SISO交易为例，用户Alice向用户Bob发起一笔交易。

一笔交易由唯一的交易ID、数据、输入和输出组成，具体描述如下：
1. **交易ID**：通过对交易内容进行哈希计算得出。
2. **数据**：可填写虚拟币数量和数字签名（虚拟币数量的加密哈希值）。
3. **输出**：包含目标（接收方）地址。
4. **输入**：包含源（发送方）地址。

注意：可能需要使用发送方的私钥生成数字签名，接收方通过公钥验证签名来确认发送方身份。

生成的交易将用于构建可验证的默克尔树和区块链。
### 4.2 可验证的默克尔树
获取一定数量的交易后，可基于这些交易构建可验证的默克尔树。需采用SHA-256哈希函数，也可在Python或Java中选用其他替代函数。以图1为例，可从四笔交易构建默克尔树。为简化操作，可始终假设交易数量为2的幂次方。
### 4.3 区块链构建
你的区块链主要由（1）一个区块头和（2）若干交易构成，其中交易在4.1节中生成。

区块头包含以下信息：
1. 4.2节中区块内所有交易的默克尔树；
2. 区块中包含的任何数据；
3. 前一个哈希值，由前一个区块生成；
4. 时间戳，即区块生成的时间；
5. 随机数（Nounce），用于挖矿（见4.4节）；
6. 当前哈希值，由当前区块生成。

注意，需使用SHA-256哈希函数生成哈希值。
### 4.4 挖矿
在此步骤中，需实现工作量证明协议。作为矿工，需要：
1. 整合区块中的所有信息，从0开始设置随机数；
2. 计算所有信息的SHA-256哈希值；
3. 如果输出小于目标值，则将新区块添加到区块链中；否则，将随机数加1，重复步骤2。

值得注意的是，可以考虑使用固定的目标值（可参考第5讲内容）。
### 4.5 完整性验证
在此步骤中，需要设计并实现一个测试程序，模拟篡改某些交易或修改区块中的数据（甚至其他字段）的过程。你所实现的系统应能报告交易/区块是否被篡改。

提示：需要生成被篡改的区块/交易的哈希值，并将其与区块头和默克尔树的哈希值进行比较。
## 5. 项目最终报告
### 5.1 内容
最终报告应包含：
1. 引言及小组成员的贡献；
2. 完成项目所使用的相关工具/库；
3. 区块链系统的流程和整体架构；
4. 设计与实现细节（至少包括伪代码、算法工作流程、数据结构和流程图）；
5. 基于模拟的实验结果；
6. 结论；
7. 参考文献；
8. 附录（如有） 。

请注意，最终报告中不应简单复制粘贴程序代码或代码截图。程序代码应作为可复现工件单独提交（见第7节）。

报告要求：
- 报告需全英文撰写。
- 应使用自己的语言撰写报告，请勿直接抄袭其他论文或技术博客的内容。
- 如有必要，应正确引用参考文献或其他相关研究。
- 引用图表时，应明确解释其含义。

违反上述任何规则都可能导致扣分。
### 5.2 格式
可使用LaTeX或MS Word撰写最终报告。但小组需在2025年4月24日17:00最终报告截止日期前，在课程Moodle平台提交PDF文件。

如果愿意，可在报告中添加额外材料，如更多实验结果和全面的文献综述。补充材料应附在10页正文之后（正文内容应控制在10页以内）。
### 5.3 提交
请在规定截止日期前，将完成的项目报告和源代码提交至课程Moodle平台。建议提交所使用的实现方法（代码），但由于课程Moodle平台的限制，文件大小应控制在一定范围内（如50MB）。还需提供代码的编译和执行方法（即README文件）。如果代码超过50MB，可提供URL链接以便下载。源代码和数据的详细信息见第7节。

任务1和任务2（4.2节）的代码提交截止时间为2025年4月3日17:00。

任务3、任务4和任务5（4.5节）的代码提交截止时间为2025年4月24日17:00。

注意：逾期提交将被扣分。
## 6. 项目展示视频
每个小组应提交一个不超过5分钟的视频展示项目。视频内容应涵盖项目动机、解决方案的主要思路和主要成果。

视频文件必须满足以下要求：
- 横向16:9画面比例
- 分辨率：1280 x 720（=16:9比例，720p）
- 帧率：30帧/秒
- 格式为针对流媒体优化的.MP4
- 视频编码必须为H.264
- 音频编码必须为AAC
- 最大文件大小：500MB

项目展示视频的提交截止时间为2025年4月24日17:00。
## 7. 可复现工件评估
工件包括软件、数据集、环境配置、机械化证明、基准测试、带脚本的测试套件等。一个完整的工件包必须包含（1）计算工件和（2）描述内容及使用方法的说明/文档。对于工件，尤其是代码和数据集，应提供脚本支持编译、部署和执行，以确保实验的可复现性。

工件描述必须包含在与工件一同提交的README文件中，且必须涵盖以下方面：
- **工件标识**：（i）报告标题；（ii）小组编号、学生姓名和学号；（iii）描述项目主要贡献以及工件在这些贡献中所起作用的摘要。摘要可包含软件架构或数据模型及其描述，以帮助理解工件，并清晰说明工件对报告中实验可复现性的贡献程度。
- **工件依赖和要求**：（i）所需硬件资源描述；（ii）所需操作系统描述；（iii）所需软件库；（iv）执行代码所需的输入数据集，或输入数据的生成方式；（v）可选的其他依赖或要求。为便于理解，最佳做法是避免在工件中列出不必要的依赖和要求。
- **工件安装和部署过程**：（i）安装和编译库及代码的过程描述；（ii）在资源中部署代码的过程描述。这些过程的描述应包括安装、编译和部署所需的时间预估。
- **实验可复现性**：（i）代码可执行的实验工作流程的完整描述；（ii）执行实验工作流程所需时间的预估；（iii）预期结果的完整描述和评估；最重要的是（iv）实验工作流程的预期结果与报告中的结果之间的关联。最佳做法是使工件的预期结果与提交报告中的结果格式一致，以便理解可复现性的范围。例如，如果报告中的结果以图表形式呈现，理想情况下，代码执行应生成类似图表（有一些开源工具，如gnuplot和Matplotlib可用于此目的）。
## 8. 评分标准
项目评分主要依据以下权重方案：
- 项目第一阶段（30%）
- 项目第二阶段（30%）
- 项目报告（20%）
- 可执行程序代码的可复现工件评估（10%）
- 展示与演示（10%） 
